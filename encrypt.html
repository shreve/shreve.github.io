---
title: Send me an encrypted message
permalink: /encrypt
description: Use this tool to encrypt a message so that only I can read it.
---

<h1>Send me an encrypted message</h1>

<noscript>This tool requires the use of javascript. If you prefer to not use javascript, you can use my public PGP key located at <a href="/key.asc">/key.asc</a>.</noscript>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/openpgp/4.5.5/openpgp.min.js"></script>

<p id="loading-message"></p>
<div id="encryption-form" class="hidden">
  <p>
    You can use this tool to encrypt a message which only I will be able to decrypt.
    It uses <a href="https://openpgpjs.org/">OpenPGP.js</a> and <a href="/key.asc">my public key</a>.
  </p>

  <p>
    <div class="form-group">
      <div class="input-group">
        <label for="name">From</label>
        <input type="text" name="name"/>
      </div>

      <div class="input-group">
        <label for="message">Message</label>
        <textarea name="message" id="input" disabled>Public key is not loaded. You cannot use this feature yet.</textarea>
      </div>

      <label>Encrypted Message</label>
      <pre id="output" title="Click here to copy to clipboard">Your encrypted message will appear here.</pre>

      <a download="encrypted-message.eml" id="send-link" class="button">Email Link</a>
    </div>
  </p>
</div>

<script type="text/javascript">
 (() => {
   let input = document.getElementById('input');
   let output = document.getElementById('output');
   let name = document.querySelector('input[name="name"]');
   let form = document.getElementById('encryption-form');
   let send = document.getElementById('send-link');
   let pubkey = "";

   try { document.getElementById('loading-message').innerText = "This tool is loading..."; } catch {}

   fetch("/key.asc")
     .then(resp => {
       resp.text().then(async (text) => {
         pubkey = (await openpgp.key.readArmored(text)).keys;
         start();
       });
     });

   let start = () => {
     input.disabled = false;
     input.innerText = "";
     form.classList.remove('hidden');
     try { document.getElementById('loading-message').remove(); } catch {}
   };

   input.addEventListener('keyup', () => {
     let message = `From: "${name.value}"\nMessage: ${input.value}`
     let options = {
       message: openpgp.message.fromText(message),
       publicKeys: pubkey
     };

     openpgp.encrypt(options).then(ciphertext => {
       output.innerText = ciphertext.data;
     });
   });

   output.addEventListener('click', () => {
     clipboard.copy(output.innerText);
   });

   send.addEventListener('click', () => {
     send.href = "mailto:Jacob Shreve<jacob@shreve.io>?body=" + encodeURI(output.innerText);
   });
 })();
</script>

<p>
  You can see the source code for this file on <a href="https://github.com/shreve/shreve.github.io/blob/master/encrypt.html">my GitHub</a>.
</p>
